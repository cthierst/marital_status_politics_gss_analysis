---
title: "gss marriage politics analysis"
subtitle: "subtitle"
author: 
  - Chloe Thierstein
thanks: "Code and data are available at: https://github.com/cthierst/marital_status_political_affiliation_gss_analysis.git"
date: "April 20, 2023"
date-format: "D MMMM YYYY"
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
toc: TRUE
number-sections: TRUE
bibliography: references.bib
---

```{r}
#| include: false

#### Load Library ####
library(tidyverse)
library(janitor)
library(ggplot2)
library(RColorBrewer)
library(kableExtra)
library(knitr)
library(dplyr)
library(here)
library(RColorBrewer)
library(kableExtra)
library(patchwork)
library(readr)
library(here)

#### Import cleaned_gss_2021.csv ####
cleaned_gss_2021 <-
  read.csv(here::here("inputs/clean_data/cleaned_gss_2021.csv"))

cleaned_gss_2018 <-
  read.csv(here::here("inputs/clean_data/cleaned_gss_2018.csv"))

cleaned_gss_2016 <-
  read.csv(here::here("inputs/clean_data/cleaned_gss_2016.csv"))

cleaned_gss_2014 <-
  read.csv(here::here("inputs/clean_data/cleaned_gss_2014.csv"))
```

# Introduction

# Data {#sec-data}

## Data Management

This paper uses the R statistical programming language [@citeR], along with several packages, tidyverse [@citetidyverse], janitor [@citejanitor], here [@citehere], and [@citedplyr]. All figures in this paper were created using the packages ggplot2 [@citeggplot2] and the tables were created using knitr [@citeknitr] and kableExtra[@citekablextra]. Combinations of figures were created using [@citepatchwork] The color styling of graphs has been created using RColorBrewer \[@citecolorbrewer\]. The model in this paper was created using the rstanarm [@citerstanarm] package.

## Source

The data within this paper was extracted from the 2014, 2016, 2018 and 2021 United States General Social Survey (GSS). This survey is a series of nationally representative cross-sectional interviews that collects data on contemporary American society to explain and monitor trends in attitudes, opinions and behaviours [@citegsscodebook]. It began tracking these trends in 1972, and has primarily used in-person data collection as its method of data collection [@citegsscodebook]. In 2021, the survey moved to an address-based sampling method with a focus on web-based self-administered questionnaires [@citegsscodebook].

## Sampling

The United States General Social Survey (GSS) samples adults over the age of 18 in the United States who are not currently living in institutional housing [@citegsscodebook]. @tbl-1 shows the total number of responses collected by the GSS and the total number of responses used in the analysis of this paper, per year.

```{r}
#| include: false

#### Create Variable Description Tibble ####

variable_table <-
  tibble(
    "Year" = c(
      "2014",
      "2016",
      "2018",
      "2021"
    ),
    "Total # of Responses" = c(
    "2,538",
    "2,867",
    "2,348",
    "4,032"
    ),
    "Total # of Responses Used in Analysis" = c(
      "2,322",
      "2,641",
      "2,143",
      "3,529"
    )
  )
```

```{r}
#| echo: false
#| warning: false
#| label: tbl-1
#| tbl-cap: "Number of Responses"
#### Add Variable Description Table ####
variable_table |>
  kable(booktabs = TRUE) |>
  kable_styling(font_size = 9, latex_options = "hold_position")
```

## Key Features

This paper explores the estimands, does political affiliation as measured through political views and identification impact marital status' and what influence does generational cohort and sex have. This paper explores these estimands through an analysis of the sample populations described in @tbl-1 under "Total \# of Responses Used in Analysis." Responses were removed to account for unanswered or not applicable responses. I did this to ensure the representative and completeness of all variables analyzed. The variables selected for analysis can be viewed in @tbl-2 and their measurement levels can be viewed in @tbl-3. Responses were measured using Likert scales which measure respondents' opinions to questions, and multiple choice questions.

```{r}
#| include: false

#### Create Variable Description Tibble ####

variable_table <-
  tibble(
    "Variable" = c(
      "partyid",
      "polviews",
      "marital",
      "sex",
      "cohort"
    ),
    "Variable Description" = c(
      "Self-ascribed belonging to the Republican, Democratic, or Indepedent parties",
    "Self-ascribed placement on a Likert scale from 'extremely liberal to extremely conservative'",
    "Marital status of respondent",
    "Self-ascribed sex of respondent",
    "Generational cohort that respondent belongs to "
    )
  )

```

```{r}
#| echo: false
#| warning: false
#| label: tbl-2
#| tbl-cap: "Variable Descriptions"
#### Add Variable Description Table ####
variable_table |>
  kable(booktabs = TRUE) |>
  kable_styling(font_size = 9, latex_options = "hold_position")
```

```{r}
#| include: false
#### Create Variable Measurement Tibble ####

variable_measure_table <-
  tibble(
    "Variable" = c(
      "partyid",
      "polviews",
      "marital",
      "sex",
      "cohort"
    ),
    "Variable Measurement" = c(
      "Strong Democrat, Not Very Strong Democrat, Independent (Close to Democrat), Independent (Neither), Independent (Close to Republican), Not Very Strong Republican, Strong Republican",
      "Extremely Liberal, Liberal, Slightly Liberal, Moderate, Slightly Conservative, Conservative, Extremely Conservative",
      "Married, Never Married, Separated, Divorced, Widowed",
      "Female, Male",
      "Post-War, Boomer, Gen X, Millenial, Gen Z"
    )
  )
```

```{r}
#| echo: false
#| warning: false
#| label: tbl-3
#| tbl-cap: "Variable Measurements"
#### Add Variable Measurement Table ####
variable_measure_table |>
  kable(booktabs = TRUE) |>
  column_spec(2, width = "41em")|>
  kable_styling(font_size = 9, latex_options = "hold_position")
```

## Bias and Ethics

# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.

```{=tex}
\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}
```
We run the model in R [@citeR] using the `rstanarm` package of [@citerstanarm]. We use the default priors from `rstanarm`.

### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)

first_model <-
  readRDS(file = here::here("outputs/models/first_model.rds"))
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

modelsummary::modelsummary(
  list(
    "First model" = first_model
  ),
  statistic = "mad",
  fmt = 2
)
```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

\newpage

# References
